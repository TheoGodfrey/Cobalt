mission_name: "Operation Cobalt Alpha"

# Requirements for the MissionOrchestrator to validate
requirements:
  min_drones: 2
  required_types:
    scout: 1
    interceptor: 1

phases:
  # --- Phase 1: Transit to LKL ---
  - name: "Phase 1: Transit to Last Known Location"
    description: "Rapid transit to the initial search datum (LKL)."
    default_behavior:
      cost_equation: "RapidTransit"
      config:
        # LKL Coordinates: [x, y, z] (Negative Z is altitude)
        target_location: [250.0, 250.0, -30.0]
      constraints:
        min_altitude: 20.0
        max_speed: 20.0
    # Triggers when the drone reaches the LKL
    trigger: "location_reached" 

  # --- Phase 2: Global Search ---
  - name: "Phase 2: Global Search"
    description: "High-altitude probabilistic search using Unified Rescue Equation"
    map_initialization:
      strategy: "InjectUniformPolygon"
      config:
        vertices:
          - [0, 0]
          - [500, 0]
          - [500, 500]
          - [0, 500]
    default_behavior:
      cost_equation: "UnifiedRescue"
      config:
        risk_theta: 0.05
        mc_samples: 300
        decay_beta: 0.002
      constraints:
        min_altitude: 20.0
        max_altitude: 60.0
        min_flight_time_minutes: 5.0
        battery_failsafe_action: "RTL"
        max_distance_from_hub: 1500.0
        distance_failsafe_action: "RTL"
    trigger: "target_found"

  # --- Phase 3: Post-Detection (The Visual Ruler) ---
  - name: "Phase 3: Post-Detection or Intervention"
    description: "Drone oscillates above target to provide visual range cues to the ship."
    map_initialization:
      strategy: "MaintainCurrent"
    postures:
      primary_interceptor:
        cost_equation: "DynamicTracking"
        config:
          # Tracking Logic
          standoff_alt: 30.0        # Base altitude (center of oscillation)
          gain_p: 1.5               # Tight tracking
          
          # Visual Rangefinder Config (The Ruler)
          parallax_axis: "z"        # Vertical bobbing
          oscillation_amplitude: 20.0 # +/- 20m movement (Total 40m sweep)
          oscillation_period: 15.0  # 15s cycle (Slow breathing rhythm)
          
        constraints:
          min_altitude: 5.0         # Safety floor
          max_speed: 25.0
          
      supporting_tracker:
        cost_equation: "EnergyEfficientTransit"
        config:
          target_location: [0, 0, 50] # Loiter high above
        constraints:
          min_altitude: 30.0
          
      rtl:
        cost_equation: "RapidTransit"
        config:
          target_location: [0.0, 0.0, -10.0]
        constraints:
          max_speed: 15.0
          
    default_behavior:
      cost_equation: "RapidTransit"
      config:
        target_location: [0.0, 0.0, -10.0]
      constraints:
        min_altitude: 5.0
    trigger: "manual_override"